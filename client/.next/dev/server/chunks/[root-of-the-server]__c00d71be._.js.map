{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Sera%20Shine/Desktop/S62-1025-Nerdvana-Express-Full-Stack-With-NextjsAnd-AWS-Azure-Supply-Chain-Loco-Verify/client/src/lib/logger.ts"],"sourcesContent":["interface LogMeta {\n  [key: string]: unknown;\n}\n\nexport const logger = {\n  info: (message: string, meta?: LogMeta) => {\n    console.log(JSON.stringify({ \n      level: \"info\", \n      message, \n      meta, \n      timestamp: new Date().toISOString() \n    }));\n  },\n  \n  error: (message: string, meta?: LogMeta) => {\n    console.error(JSON.stringify({ \n      level: \"error\", \n      message, \n      meta, \n      timestamp: new Date().toISOString() \n    }));\n  },\n  \n  warn: (message: string, meta?: LogMeta) => {\n    console.warn(JSON.stringify({ \n      level: \"warn\", \n      message, \n      meta, \n      timestamp: new Date().toISOString() \n    }));\n  },\n  \n  debug: (message: string, meta?: LogMeta) => {\n    console.debug(JSON.stringify({ \n      level: \"debug\", \n      message, \n      meta, \n      timestamp: new Date().toISOString() \n    }));\n  }\n};"],"names":[],"mappings":";;;;AAIO,MAAM,SAAS;IACpB,MAAM,CAAC,SAAiB;QACtB,QAAQ,GAAG,CAAC,KAAK,SAAS,CAAC;YACzB,OAAO;YACP;YACA;YACA,WAAW,IAAI,OAAO,WAAW;QACnC;IACF;IAEA,OAAO,CAAC,SAAiB;QACvB,QAAQ,KAAK,CAAC,KAAK,SAAS,CAAC;YAC3B,OAAO;YACP;YACA;YACA,WAAW,IAAI,OAAO,WAAW;QACnC;IACF;IAEA,MAAM,CAAC,SAAiB;QACtB,QAAQ,IAAI,CAAC,KAAK,SAAS,CAAC;YAC1B,OAAO;YACP;YACA;YACA,WAAW,IAAI,OAAO,WAAW;QACnC;IACF;IAEA,OAAO,CAAC,SAAiB;QACvB,QAAQ,KAAK,CAAC,KAAK,SAAS,CAAC;YAC3B,OAAO;YACP;YACA;YACA,WAAW,IAAI,OAAO,WAAW;QACnC;IACF;AACF","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Sera%20Shine/Desktop/S62-1025-Nerdvana-Express-Full-Stack-With-NextjsAnd-AWS-Azure-Supply-Chain-Loco-Verify/client/src/lib/errorHandler.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { logger } from \"./logger\";\n\ninterface AppError extends Error {\n  name: string;\n  message: string;\n  stack?: string;\n  details?: unknown;\n}\n\nexport function handleError(error: unknown, context: string) {\n  const isProd = process.env.NODE_ENV === \"production\";\n\n  // Determine the appropriate status code\n  let statusCode = 500;\n  let errorMessage = \"Unknown error occurred\";\n\n  if (error instanceof Error) {\n    errorMessage = error.message;\n\n    // Handle different error types\n    if (error.name === 'ValidationError') {\n      statusCode = 400;\n    } else if (error.name === 'NotFoundError') {\n      statusCode = 404;\n    } else if (error.name === 'UnauthorizedError') {\n      statusCode = 401;\n    }\n  }\n\n  // Construct the error response\n  const errorResponse: {\n    success: boolean;\n    message: string;\n    stack?: string;\n    details?: unknown;\n  } = {\n    success: false,\n    message: isProd \n      ? getProductionMessage(statusCode)\n      : errorMessage,\n  };\n\n  // Include stack trace only in development\n  if (!isProd && error instanceof Error && error.stack) {\n    errorResponse.stack = error.stack;\n  }\n\n  // Include additional error details in development\n  if (!isProd && error instanceof Error && (error as AppError).details) {\n    errorResponse.details = (error as AppError).details;\n  }\n\n  // Log the error with structured data\n  logger.error(`Error in ${context}`, {\n    message: errorMessage,\n    statusCode: statusCode,\n    stack: isProd ? \"REDACTED\" : (error instanceof Error ? error.stack : \"No stack\"),\n    context: context,\n    timestamp: new Date().toISOString()\n  });\n\n  return NextResponse.json(errorResponse, { status: statusCode });\n}\n\n// Helper function to get user-friendly production messages\nfunction getProductionMessage(statusCode: number): string {\n  const messages: { [key: number]: string } = {\n    400: \"Invalid request. Please check your input.\",\n    401: \"Authentication required. Please log in.\",\n    403: \"You don't have permission to access this resource.\",\n    404: \"The requested resource was not found.\",\n    500: \"Something went wrong. Please try again later.\",\n    503: \"Service temporarily unavailable. Please try again later.\"\n  };\n\n  return messages[statusCode] || \"Something went wrong. Please try again later.\";\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AASO,SAAS,YAAY,KAAc,EAAE,OAAe;IACzD,MAAM,SAAS,oDAAyB;IAExC,wCAAwC;IACxC,IAAI,aAAa;IACjB,IAAI,eAAe;IAEnB,IAAI,iBAAiB,OAAO;QAC1B,eAAe,MAAM,OAAO;QAE5B,+BAA+B;QAC/B,IAAI,MAAM,IAAI,KAAK,mBAAmB;YACpC,aAAa;QACf,OAAO,IAAI,MAAM,IAAI,KAAK,iBAAiB;YACzC,aAAa;QACf,OAAO,IAAI,MAAM,IAAI,KAAK,qBAAqB;YAC7C,aAAa;QACf;IACF;IAEA,+BAA+B;IAC/B,MAAM,gBAKF;QACF,SAAS;QACT,SAAS,sCACL,0BACA;IACN;IAEA,0CAA0C;IAC1C,IAAI,CAAC,UAAU,iBAAiB,SAAS,MAAM,KAAK,EAAE;QACpD,cAAc,KAAK,GAAG,MAAM,KAAK;IACnC;IAEA,kDAAkD;IAClD,IAAI,CAAC,UAAU,iBAAiB,SAAS,AAAC,MAAmB,OAAO,EAAE;QACpE,cAAc,OAAO,GAAG,AAAC,MAAmB,OAAO;IACrD;IAEA,qCAAqC;IACrC,sRAAM,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE,SAAS,EAAE;QAClC,SAAS;QACT,YAAY;QACZ,OAAO,sCAAS,0BAAc,iBAAiB,QAAQ,MAAM,KAAK,GAAG;QACrE,SAAS;QACT,WAAW,IAAI,OAAO,WAAW;IACnC;IAEA,OAAO,sSAAY,CAAC,IAAI,CAAC,eAAe;QAAE,QAAQ;IAAW;AAC/D;AAEA,2DAA2D;AAC3D,SAAS,qBAAqB,UAAkB;IAC9C,MAAM,WAAsC;QAC1C,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;IACP;IAEA,OAAO,QAAQ,CAAC,WAAW,IAAI;AACjC","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Sera%20Shine/Desktop/S62-1025-Nerdvana-Express-Full-Stack-With-NextjsAnd-AWS-Azure-Supply-Chain-Loco-Verify/client/src/app/api/auth/signup/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport bcrypt from \"bcrypt\";\nimport { PrismaClient, Role } from \"@prisma/client\";\nimport { handleError } from \"../../../../lib/errorHandler\"; // ADD THIS IMPORT\n\nconst prisma = new PrismaClient();\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    const {\n      name,\n      email,\n      password,\n      phone,\n      shopName,\n      role = Role.VENDOR, // This should work now!\n    } = body;\n\n    if (!name || !email || !password) {\n      const error = new Error(\"Name, email, and password are required\");\n      error.name = \"ValidationError\";\n      throw error;\n    }\n\n    // Check if user already exists\n    const existingUser = await prisma.user.findUnique({\n      where: { email },\n    });\n\n    if (existingUser) {\n      const error = new Error(\"User already exists\");\n      error.name = \"ValidationError\";\n      throw error;\n    }\n\n    // Validate role - use Object.values() instead of direct enum values\n    if (role && !Object.values(Role).includes(role)) {\n      const error = new Error(\n        \"Invalid role. Must be either 'VENDOR' or 'ADMIN'\"\n      );\n      error.name = \"ValidationError\";\n      throw error;\n    }\n\n    // Hash password\n    const hashedPassword = await bcrypt.hash(password, 10);\n\n    // Create new user\n    const newUser = await prisma.user.create({\n      data: {\n        name,\n        email,\n        password: hashedPassword,\n        phone: phone || null,\n        shopName: shopName || null,\n        role: role,\n      },\n      select: {\n        id: true,\n        name: true,\n        email: true,\n        phone: true,\n        shopName: true,\n        role: true,\n        createdAt: true,\n      },\n    });\n\n    return NextResponse.json(\n      { message: \"User created successfully\", user: newUser },\n      { status: 201 }\n    );\n  } catch (error) {\n    return handleError(error, \"POST /api/auth/signup\"); // REPLACE ERROR HANDLING\n  } finally {\n    await prisma.$disconnect();\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA,sdAA4D,kBAAkB;;;;;AAE9E,MAAM,SAAS,IAAI,6IAAY;AAExB,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EACJ,IAAI,EACJ,KAAK,EACL,QAAQ,EACR,KAAK,EACL,QAAQ,EACR,OAAO,qIAAI,CAAC,MAAM,EACnB,GAAG;QAEJ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,UAAU;YAChC,MAAM,QAAQ,IAAI,MAAM;YACxB,MAAM,IAAI,GAAG;YACb,MAAM;QACR;QAEA,+BAA+B;QAC/B,MAAM,eAAe,MAAM,OAAO,IAAI,CAAC,UAAU,CAAC;YAChD,OAAO;gBAAE;YAAM;QACjB;QAEA,IAAI,cAAc;YAChB,MAAM,QAAQ,IAAI,MAAM;YACxB,MAAM,IAAI,GAAG;YACb,MAAM;QACR;QAEA,oEAAoE;QACpE,IAAI,QAAQ,CAAC,OAAO,MAAM,CAAC,qIAAI,EAAE,QAAQ,CAAC,OAAO;YAC/C,MAAM,QAAQ,IAAI,MAChB;YAEF,MAAM,IAAI,GAAG;YACb,MAAM;QACR;QAEA,gBAAgB;QAChB,MAAM,iBAAiB,MAAM,gHAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,kBAAkB;QAClB,MAAM,UAAU,MAAM,OAAO,IAAI,CAAC,MAAM,CAAC;YACvC,MAAM;gBACJ;gBACA;gBACA,UAAU;gBACV,OAAO,SAAS;gBAChB,UAAU,YAAY;gBACtB,MAAM;YACR;YACA,QAAQ;gBACN,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,OAAO;gBACP,UAAU;gBACV,MAAM;gBACN,WAAW;YACb;QACF;QAEA,OAAO,sSAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAA6B,MAAM;QAAQ,GACtD;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,OAAO,IAAA,iSAAW,EAAC,OAAO,0BAA0B,yBAAyB;IAC/E,SAAU;QACR,MAAM,OAAO,WAAW;IAC1B;AACF","debugId":null}}]
}